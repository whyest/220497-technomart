"use strict";var isIE=function(){var e=window.navigator.userAgent;return-1<e.indexOf("MSIE ")||-1<e.indexOf("Trident/")}(),EVENT={CLICK:"click",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",KEYDOWN:"keydown"},overlay=document.querySelector(".modal-overlay"),popups=document.querySelectorAll(".modal"),openMap=document.querySelector(".js-open-map"),popupMap=document.querySelector(".modal--map"),closeMap=document.querySelector(".js-close-map"),openFeedback=document.querySelector(".js-open-feedback"),popupFeedback=document.querySelector(".modal--feedback"),closeFeedback=document.querySelector(".js-close-feedback"),feedbackForm=document.querySelector(".feedback-form"),feedbackName=popupFeedback&&popupFeedback.querySelector("#feedback-name"),feedbackMail=popupFeedback&&popupFeedback.querySelector("#feedback-mail"),feedbackMessage=popupFeedback&&popupFeedback.querySelector("#feedback-message"),buyButtons=document.querySelectorAll(".js-buy"),popupBuyModal=document.querySelector(".modal--cart"),closeBuyModal=document.querySelector(".js-close-cart"),addBookmarkButtons=document.querySelectorAll(".js-add-bookmark"),storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("mail"),slideControls=document.querySelectorAll(".carousel__slide-indicator"),slides=document.querySelectorAll(".slide"),nextSlideBtn=document.querySelector(".carousel__scroll--next"),prevSlideBtn=document.querySelector(".carousel__scroll--prev"),activeSlide=1,tabsControls=document.querySelectorAll(".tabs__control"),tabsContents=document.querySelectorAll(".tabs__item"),activeServiceTab=0;function closePopup(e){e.classList.remove("modal--show"),overlay.classList.remove("modal-overlay--show")}function openPopup(e){e.classList.add("modal--show"),overlay.classList.add("modal-overlay--show")}function setActiveSlide(){Array.prototype.forEach.call(slideControls,function(e,t){e.classList.contains("carousel__slide-indicator--current")&&e.classList.remove("carousel__slide-indicator--current"),t===activeSlide&&e.classList.add("carousel__slide-indicator--current")}),Array.prototype.forEach.call(slides,function(e,t){e.classList.contains("carousel__slide--current")&&e.classList.remove("carousel__slide--current"),t===activeSlide&&e.classList.add("carousel__slide--current")})}function setActiveServiceTab(){Array.prototype.forEach.call(tabsControls,function(e,t){e.classList.contains("tabs__control--current")&&e.classList.remove("tabs__control--current"),t===activeServiceTab&&e.classList.add("tabs__control--current")}),Array.prototype.forEach.call(tabsContents,function(e,t){e.classList.contains("tabs__item--current")&&e.classList.remove("tabs__item--current"),t===activeServiceTab&&e.classList.add("tabs__item--current")})}overlay.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),Array.prototype.forEach.call(popups,function(e){e.classList.contains("modal--show")&&closePopup(e),e.classList.contains("modal--error")&&e.classList.remove("modal--error")})}),openMap&&openMap.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),openPopup(popupMap)}),closeMap&&closeMap.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),closePopup(popupMap)}),openFeedback&&openFeedback.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),openPopup(popupFeedback),storageName&&(feedbackName.value=storageName),storageMail&&(feedbackMail.value=storageMail),storageName&&storageMail?feedbackMessage.focus():storageName?feedbackMail.focus():feedbackName.focus()}),closeFeedback&&closeFeedback.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),popupFeedback.classList.remove("modal--error"),closePopup(popupFeedback)}),feedbackForm&&feedbackForm.addEventListener(EVENT.SUBMIT,function(e){feedbackName.value&&feedbackMail.value&&feedbackMessage.value?(feedbackName&&localStorage.setItem("name",feedbackName.value),feedbackMail&&localStorage.setItem("mail",feedbackMail.value)):(e.preventDefault(),popupFeedback.classList.add("modal--error"))}),buyButtons&&Array.prototype.forEach.call(buyButtons,function(t){isIE&&(t.addEventListener(EVENT.FOCUS,function(e){e.preventDefault(),t.parentElement.parentElement.parentElement.classList.add("card--current")}),t.addEventListener(EVENT.BLUR,function(e){e.preventDefault(),t.parentElement.parentElement.parentElement.classList.remove("card--current")})),t.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),openPopup(popupBuyModal)})}),closeBuyModal&&closeBuyModal.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),closePopup(popupBuyModal)}),window.addEventListener(EVENT.KEYDOWN,function(e){27===e.keyCode&&(Array.prototype.forEach.call(popups,function(e){e.classList.contains("modal--show")&&closePopup(e),e.classList.contains("modal--error")&&e.classList.remove("modal--error")}),overlay.classList.remove("modal-feedback--show"))}),Array.prototype.forEach.call(addBookmarkButtons,function(t){isIE&&(t.addEventListener(EVENT.FOCUS,function(e){e.preventDefault(),t.parentElement.parentElement.parentElement.classList.add("card--current")}),t.addEventListener(EVENT.BLUR,function(e){e.preventDefault(),t.parentElement.parentElement.parentElement.classList.remove("card--current")}))}),nextSlideBtn&&nextSlideBtn.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),activeSlide<slides.length-1&&(activeSlide++,setActiveSlide())}),prevSlideBtn&&prevSlideBtn.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),0<activeSlide&&(activeSlide--,setActiveSlide())}),slideControls&&Array.prototype.forEach.call(slideControls,function(e,t){e.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),activeSlide=t,setActiveSlide()})}),tabsControls&&Array.prototype.forEach.call(tabsControls,function(e,t){e.addEventListener(EVENT.CLICK,function(e){e.preventDefault(),activeServiceTab!==t&&(activeServiceTab=t,setActiveServiceTab())})});
